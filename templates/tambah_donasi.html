{% extends "base.html" %} {% block content %}

<div class="max-w-xl mx-auto bg-white p-8 rounded-lg shadow">
  <h2 class="text-2xl font-semibold mb-6 text-slate-700">Tambah Donasi</h2>
  <form method="POST" enctype="multipart/form-data" class="space-y-4">
    <select
      name="id_charity"
      class="w-full p-3 border rounded bg-white"
      required
    >
      <option value="">Pilih Charity</option>
      {% for c in charity_list %}
      <option value="{{ c.id_charity }}">{{ c.nama_charity }}</option>
      {% endfor %}
    </select>
    <input
      name="jumlah_donasi"
      type="number"
      class="w-full p-3 border rounded"
      placeholder="Jumlah Donasi"
      required
    />
    <select
      name="metode_pembayaran"
      id="metodePembayaran"
      class="w-full p-3 border rounded bg-white"
      required
    >
      <option value="transfer">Transfer</option>
      <option value="qris">QRIS</option>
    </select>
    <div id="qrisBox" class="hidden mt-4 text-center">
      <p class="text-slate-700 font-semibold mb-2">Scan QR untuk membayar:</p>
      <img
        id="qrImage"
        src="/static/qris.png"
        alt="QRIS"
        class="w-60 mx-auto cursor-pointer rounded shadow"
      />
    </div>
    <div class="mt-4">
      <label class="block mb-1 font-medium text-slate-700"
        >Upload Bukti Pembayaran</label
      >
      <input
        type="file"
        name="bukti"
        accept="image/*"
        class="w-full p-3 border rounded bg-white"
        required
      />
    </div>
    <button
      class="w-full bg-slate-900 hover:bg-slate-800 text-white font-bold p-3 rounded"
    >
      Simpan Donasi
    </button>
  </form>
  <div
    id="zoomModal"
    class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50"
  >
    <img id="zoomedImg" class="max-w-full max-h-full rounded shadow-lg" />
  </div>
</div>
<div
  id="zoomModal"
  class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50"
>
  <img id="zoomedImg" class="max-w-full max-h-full rounded shadow-lg" />
</div>
<script>
  const qrImage = document.getElementById("qrImage");
  const zoomModal = document.getElementById("zoomModal");
  const zoomedImg = document.getElementById("zoomedImg");
  qrImage.onclick = () => {
    zoomedImg.src = qrImage.src;
    zoomModal.classList.remove("hidden");
    zoomModal.classList.add("flex");
  };
  zoomModal.onclick = () => {
    zoomModal.classList.add("hidden");
    zoomModal.classList.remove("flex");
  };

</script>
<script>
  const metode = document.getElementById("metodePembayaran");
  const qrisBox = document.getElementById("qrisBox");
  metode.addEventListener("change", function () {
    if (this.value === "qris") {
      qrisBox.classList.remove("hidden");
    } else {
      qrisBox.classList.add("hidden");
    }
  });
</script>
{% endblock %}
